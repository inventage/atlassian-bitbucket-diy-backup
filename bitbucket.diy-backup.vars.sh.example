#!/bin/bash

##
# It is recomended to `chmod 600 bitbucket.diy-backup.vars.sh` after copying the template.
##

CURL_OPTIONS="-L -s -f"

# Which database backup script to use (ex: mssql, postgresql, mysql, ebs-collocated, rds)
BACKUP_DATABASE_TYPE=postgresql

# Which filesystem backup script to use (ex: rsync, ebs-home)
BACKUP_HOME_TYPE=rsync

# Which archive backup script to use (ex: tar, tar-gpg)
BACKUP_ARCHIVE_TYPE=tar

# Used by the scripts for verbose logging. If not true only errors will be shown.
BITBUCKET_VERBOSE_BACKUP=TRUE

# The base url used to access this bitbucket instance. It cannot end on a '/'
BITBUCKET_URL=

# Used in AWS backup / restore to tag snapshots. It cannot contain spaces and it must be under 100 characters long
INSTANCE_NAME=bitbucket

# The username and password for the user used to make backups (and have this permission)
BITBUCKET_BACKUP_USER=
BITBUCKET_BACKUP_PASS=

# The name of the database used by this instance.
BITBUCKET_DB=bitbucket
# The path to bitbucket home folder (with trailing /)
BITBUCKET_HOME=/var/atlassian/application-data/bitbucket/


# OS level user and group information (typically: 'atlbitbucket' for both)
BITBUCKET_UID=atlbitbucket
BITBUCKET_GID=atlbitbucket

# The path to working folder for the backup
BITBUCKET_BACKUP_ROOT=
BITBUCKET_BACKUP_DB=${BITBUCKET_BACKUP_ROOT}/bitbucket-db/
BITBUCKET_BACKUP_HOME=${BITBUCKET_BACKUP_ROOT}/bitbucket-home/

# The path to where the backup archives are stored
BITBUCKET_BACKUP_ARCHIVE_ROOT=

# List of repo IDs which should be excluded from the backup
# It should be space separated: (2 5 88)
BITBUCKET_BACKUP_EXCLUDE_REPOS=()

# PostgreSQL options
POSTGRES_HOST=
POSTGRES_USERNAME=
POSTGRES_PASSWORD=
POSTGRES_PORT=5432

# MySQL options
MYSQL_HOST=
MYSQL_USERNAME=
MYSQL_PASSWORD=
MYSQL_BACKUP_OPTIONS=

# HipChat options
HIPCHAT_URL=https://api.hipchat.com
HIPCHAT_ROOM=
HIPCHAT_TOKEN=

# Options for the tar-gpg archive type
BITBUCKET_BACKUP_GPG_RECIPIENT=

# If set to true, this variable will backup the filesystem and database without locking the application.
# The resulting backups may contain inconsistencies, so you must run Bitbucket Server 4.8 or higher and check recently
# modified repositories and pull requests after restoring. Bitbucket Data Center with the disaster.recovery=true option
# can actively scan for such inconsistencies and resolve them automatically.
# For more information, see https://confluence.atlassian.com/display/BitbucketServer/Using+Bitbucket+Data+Center+Zero+Downtime+Backup
# Make sure you read and understand this document before setting this variable to "true"
BACKUP_ZERO_DOWNTIME=false